<!DOCTYPE html>
<html>
<head>
<!-- GrowingIo的接口，用于统计分析用户行为数据 -->
		<!-- <script type='text/javascript'>
            var _vds = _vds || [];
            window._vds = _vds;
            (function(){
               _vds.push(['setAccountId', '98f0d63603fe182a']);
            (function() {
               var vds = document.createElement('script');
               vds.type='text/javascript';
               vds.async = true;
               vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
               var s = document.getElementsByTagName('script')[0];
               s.parentNode.insertBefore(vds, s);
            })();
            })();
        </script> -->
	<meta charset="utf-8">
	<meta name="/renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<meta name="format-detection" content="telephone=no" />
	<link rel="stylesheet" type="text/css" href="/resource/flower/css/flower.css" />
	<link rel="stylesheet" type="text/css" href="//res.wx.qq.com/open/libs/weui/1.1.1/weui.min.css" />
	<script type="text/javascript" src="/resource/flower/js/jquery-1.8.1.min.js"></script>
	<script type="text/javascript" src="/resource/layer/layer.js"></script>
	<script type="text/javascript" src="/resource/flower/js/flower.js"></script>
    <script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
	<title>幸运大翻牌</title>
</head>
<style>
.turnbg{
	background: url("/resource/flower/image/turnbg.jpg") no-repeat;
	background-size: 100% 100%;
	padding-bottom: 1vw;
}
.container {
    width: 100%;
    max-width: 768px;
    margin: 0 auto;
    display: table;
    font-family: Microsoft Yahei;
    padding: 0;
}
.content{
	padding-top: 60vw;
	padding-bottom: 5vw;
	text-align: center;
}
ul{
	margin: auto;
	width: 90%;
}
.content img{
	width: 36vw;
}
.p1{
	text-align: center;
	color: #fff;
	font-family: cursive;
	margin: 3vw;
	position: relative;
	letter-spacing: 2px;
}
.p1:before, .p1:after {
    content: '';                 
    position: absolute;         
    top: 52%;
    background: #fff;       
    width: 9%;
    height: 1px;
}
.p1:before{
    left: 12%;        
}
.p1:after {
    right: 12%;
}
.outer{
	padding:1vw;
	position: relative;
	width: 36vw;
	height: 48vw;
	display: inline-block;
}
.outer div{
    position: absolute;
    transform-style: preserve-3d;
    -ms-transform-style: preserve-3d;	/* IE 9 */
	-moz-transform-style: preserve-3d;	/* Firefox */
	-webkit-transform-style: preserve-3d; /* Safari 和 Chrome */
	-o-transform-style: preserve-3d; 	/* Opera */
    backface-visibility:hidden;
    -webkit-backface-visibility:hidden;	/* Chrome 和 Safari */
	-moz-backface-visibility:hidden; 	/* Firefox */
	-ms-backface-visibility:hidden; 	/* Internet Explorer */
    transition:all 3s;
     -ms-transition: all 3s;	/* IE 9 */
	-moz-transition: all 3s;	/* Firefox */
	-webkit-transition: all 3s; /* Safari 和 Chrome */
	-o-transition: all 3s; 	/* Opera */
}
.div1{
    transform:rotateY(0deg);
	-ms-transform:rotateY(0deg); 	/* IE 9 */
	-moz-transform:rotateY(0deg);	/* Firefox */
	-webkit-transform:rotateY(0deg); /* Safari 和 Chrome */
	-o-transform:rotateY(0deg); 	/* Opera */
}
.div2{
    transform:rotateY(-180deg);
    -ms-transform:rotateY(-180deg); 	/* IE 9 */
	-moz-transform:rotateY(-180deg);	/* Firefox */
	-webkit-transform:rotateY(-180deg); /* Safari 和 Chrome */
	-o-transform:rotateY(-180deg); 	/* Opera */
}
.result{
	position: absolute;
	z-index: 99;
	text-align: center;
	top: 50%;
    left: 22%;
    font-family: cursive;
    color: #f48e44;
     animation: word 2s;
    -webkit-animation: word 2s;
    -o-animation: word 2s;
    -moz-animation: word 2s; 
}
@keyframes word
{
	from {opacity: 0;}
	to {opacity: 1;}
}
@-wekit-keyframes word
{
	from {opacity: 0;}
	to {opacity: 1;}
}
@-moz-keyframes word
{
	from {opacity: 0;}
	to {opacity: 1;}
}
@-o-keyframes word
{
	from {opacity: 0;}
	to {opacity: 1;}
}
#showDiv{
background-color: #3a3939;
width:70vw;
height:auto;
display:none;
z-index: 99;
opacity: 0.9;
margin-left: 3vw;
text-align:center;
margin-top: 40vw;
color: #fff;
font-size: 14px;
padding: 5px;
}
</style>
<body>
	<div class="container">
		<div class="turnbg">
			<div class="content">
				<ul>
					<li class="outer">
						<div id="showDiv" class=""></div>			
						<div class="div1">
							<img src="${img.img03}"/>
						</div>
						<div class="div2">
							<img src="/resource/flower/image/turnbg2.png"/>
						</div>
					</li>
					<li class="outer">
						<div class="div1">
							<img src="${img.img04}"/>
						</div>
						<div class="div2">
							<img src="/resource/flower/image/turnbg2.png"/>
						</div>
					</li>
					<li class="outer">
						<div class="div1">
							<img src="${img.img05}"/>
						</div>
						<div class="div2">
							<img src="/resource/flower/image/turnbg2.png"/>
						</div>
					</li>
					<li class="outer">
						<div class="div1">
							<img src="${img.img06}"/>
						</div>
						<div class="div2">
							<img src="/resource/flower/image/turnbg2.png"/>
						</div>
					</li>
				</ul>
			</div>
			<p class="p1">活动已有<span style="background-color: #d71b19;color:#fff;padding: 0 8px;border-radius: 5px;">${result.num!}</span>人参加</p>
			<div style="text-align: center;">
				<img src="/resource/flower/image/turnqr.png" style="width: 22vw;" />
				<p class="p2" style="color: #fff;font-family: cursive;">扫码参加此活动</p>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		$(function(){
			wxconfig(window.location);
			wx.ready(function(){
				wx.onMenuShareTimeline({
					title:'${nick!}正在参加花美美双11翻牌游戏,领取可叠加使用花票,你也来试试吧', // 分享描述
					 link: 'http://'+window.location.host+'/service/turn11/'+'${lrId!}', // 分享链接
					 imgUrl: 'http://'+window.location.host+'${img.img02!}', // 分享图标
				     type: 'link', // 分享类型,music、video或link，不填默认为link
				     dataUrl: '',
				     success: function () {
				    	 location.replace('/service/turn11/'+'${lrId!}');
					 },
					 cancel: function () {
						        // 用户取消分享后执行的回调函数
					 }

				});
				wx.onMenuShareAppMessage({
					title: '${nick!}正在参加花美美双11翻牌游戏,领取可叠加使用花票,你也来试试吧', // 分享标题
					desc: '来帮${nick!}翻牌！', // 分享描述
				    link: 'http://'+window.location.host+'/service/turn11/'+'${lrId!}', // 分享链接
				    imgUrl: 'http://'+window.location.host+'${img.img02!}', // 分享图标
				    type: 'link', // 分享类型,music、video或link，不填默认为link
				    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
				    success: function () {
				    	location.replace('/service/turn11/'+'${lrId!}');
				    },
				    cancel: function () {
				        // 用户取消分享后执行的回调函数
				    }
				});
			});
			$(".outer").on('click',function(){
				var that =this;
				$(".outer").css('pointer-events','none');
				      $.ajax({
			       	url: '/service/turn11_result',
					data: {
						"lrId":"${lrId!}"
					},
					type: 'post',
					dataType: 'json',
					cache: false,
					success: function(data){
						if (data.isoutdate) {
							$("#showDiv").append("活动已经结束");
							$("#showDiv").show();
							setTimeout(() => {
								$("#showDiv").html("");
								$("#showDiv").hide();
								$(".outer").css('pointer-events','auto');
							}, 5000);return;
						}
						if (data.isoutnum) {
							$("#showDiv").append("${nick!}此次分享的100次翻牌机会已经消耗完,您不能再为他翻了哦");
							$("#showDiv").show();
							setTimeout(() => {
								$("#showDiv").html("");
								$("#showDiv").hide();
								$(".outer").css('pointer-events','auto');
							}, 5000);return;
						}
						if(data.result){ 
							$(that).find(".div2").append("<b class='result'>增加金额<br />"+data.rd.money+"元</b>");
							$(that).find(".div1").css({'transform':'rotateY(-180deg)','-o-transform':'rotateY(-180deg)','-webkit-transform':'rotateY(-180deg)','-moz-transform':'rotateY(-180deg)'});
							$(that).find(".div2").css({'transform':'rotateY(0deg)','-o-transform':'rotateY(0deg)','-webkit-transform':'rotateY(0deg)','-moz-transform':'rotateY(0deg)'});					
						
							$("#showDiv").append(""+data.rd.msg);
							setTimeout(() => {
								$("#showDiv").show();
							}, 3000);
							
							setTimeout(() => {
								$("#showDiv").html("");
								$("#showDiv").hide();
								$(".outer").css('pointer-events','auto');
								$(that).css('pointer-events','none');
							}, 6000);		    
						 }else{
							$("#showDiv").append("你已经为${nick!}翻了"+data.rd.money+"元,没有机会了哦!");
							$("#showDiv").show();
							setTimeout(() => {
								$("#showDiv").html("");
								$("#showDiv").hide();
								$(".outer").css('pointer-events','auto');
							}, 5000);
					 	}
					}
				});  
			})
		})
	</script>
</body>
</html>